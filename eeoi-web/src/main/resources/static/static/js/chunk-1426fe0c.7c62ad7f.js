(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1426fe0c"],{"4cb6":function(e,t,o){"use strict";var l=o("68c4"),a=o.n(l);a.a},"68c4":function(e,t,o){},e244:function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"oilForm",attrs:{rules:e.oilRules,model:e.oilForm}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.oilFormData,stripe:"",border:"",size:"mini"}},[o("el-table-column",{attrs:{label:e.$t("voyageOil.oilType"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[o("span",[e._v(e._s(l.oilName))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyageOil.Bargeoilvolume"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[o("el-input",{staticClass:"el_input",attrs:{type:"number",oninput:"if(isNaN(value)) { value = parseFloat(value) } if(value.indexOf('.')>0){value=value.slice(0,value.indexOf('.')+4)}",readonly:e.readOnly},model:{value:l.outTons,callback:function(t){e.$set(l,"outTons",t)},expression:"row.outTons"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyageOil.Oiltransfertime"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[o("el-date-picker",{staticClass:"el_input",attrs:{type:"datetime",placeholder:e.$t("MRV.Selectdatetime"),disabled:e.readOnly,format:"yyyy-MM-dd HH:mm","picker-options":e.pickerOptionsEndportTemp},model:{value:l.outTm,callback:function(t){e.$set(l,"outTm",t)},expression:"row.outTm"}})]}}])}),e._v(" "),e.readOnly?e._e():o("el-table-column",{attrs:{label:e.$t("common.operate"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.addClick(t.row,t.$index)}}},[e._v(e._s(e.$t("common.add")))]),e._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:function(o){return e.deleteClick(t.row,t.$index)}}},[e._v(e._s(e.$t("common.delete")))])]}}],null,!1,3125556039)})],1)],1)},a=[],n=o("bff4"),i={name:"Bargeoilvolume",props:{times:{},timeEnd:{}},data:function(){var e=this;return{shipId:"",Bargeoilvolume:[],readOnly:!1,oilFormData:[],oilRules:{},tempOilFormdata:[],oilForm:{},pickerOptionsEndportTemp:{disabledDate:function(t){var o=e.times,l=e.timeEnd;if(o&&l)return t.getTime()<new Date(o).getTime()-864e5||t.getTime()>new Date(l).getTime()}}}},watch:{shipId:function(e){e&&this.getFuelList(e)}},created:function(){},methods:{addClick:function(e,t){var o={id:e.id,oilId:e.oilId,oilName:e.oilName,outTons:e.outTons,outTm:e.outTm};this.oilFormData.splice(t,0,o)},deleteClick:function(e,t){var o=this;this.$confirm("此操作将永久删除该油料类型如需想从新添加需要从新选择船舶, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.oilFormData.splice(t,1),o.$message({type:"success",message:"删除成功!"})})).catch((function(){o.$message({type:"info",message:"已取消删除"})}))},initsave:function(){var e=this,t=[],o=[];Object(n["x"])().then((function(l){var a=!0,n=!1,i=void 0;try{for(var r,u=l.data.data.items[Symbol.iterator]();!(a=(r=u.next()).done);a=!0){var d=r.value,s={id:"",oilId:"",oilName:"",arrTons:0,deptTons:0,addTons:0,addBillNo:"",addTm:null,outTons:0,outTm:null,correctTons:0},c={id:"",oilId:"",oilName:"",arrTons:0,deptTons:0,addTons:0,addBillNo:"",addTm:null,outTons:0,outTm:null,correctTons:0};s.id=d.id,s.oilId=d.fuelCode,s.oilName=d.fuelName,c.id=d.id,c.oilId=d.fuelCode,c.oilName=d.fuelName,t.push(s),o.push(c)}}catch(p){n=!0,i=p}finally{try{a||null==u.return||u.return()}finally{if(n)throw i}}if(e.oilFormData=t,e.tempOilFormdata=o,e.Bargeoilvolume.length>0){var m=e.Bargeoilvolume.map((function(e){return e.oilId})),f=e.oilFormData.filter((function(e){return!m.some((function(t){return t===e.oilId}))}));e.oilFormData=f.concat(e.Bargeoilvolume)}}))},initDat:function(){this.oilFormData.length=0,this.tempOilFormdata.length=0},getFuelList:function(e){var t=this;Object(n["h"])(e).then((function(e){if(0==e.data.data.length)t.initsave();else{var o=[],l=[];if(e.data.data.forEach((function(e){var t={id:"",oilId:"",oilName:"",arrTons:0,deptTons:0,addTons:0,addBillNo:"",addTm:null,outTons:0,outTm:null,correctTons:0},a={id:"",oilId:"",oilName:"",arrTons:0,deptTons:0,addTons:0,addBillNo:"",addTm:null,outTons:0,outTm:null,correctTons:0};t.id=e.id,t.oilId=e.fuelCode,t.oilName=e.fuelName,a.id=e.id,a.oilId=e.fuelCode,a.oilName=e.fuelName,o.push(t),l.push(a)})),t.oilFormData=o,t.tempOilFormdata=l,t.Bargeoilvolume.length>0){var a=t.Bargeoilvolume.map((function(e){return e.oilId})),n=t.oilFormData.filter((function(e){return!a.some((function(t){return t===e.oilId}))}));t.oilFormData=n.concat(t.Bargeoilvolume)}}}))}}},r=i,u=(o("4cb6"),o("2877")),d=Object(u["a"])(r,l,a,!1,null,null,null);t["default"]=d.exports}}]);