(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77c5ae4a"],{5361:function(e,t,o){"use strict";var a=o("69a6"),i=o.n(a);i.a},"69a6":function(e,t,o){},"9e0b":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[e.eeDataVisiable?o("div",{staticClass:"filter-container"},[o("div",{staticStyle:{display:"inline-block"}},[o("label",{staticClass:"radio-label",staticStyle:{"padding-left":"15px"}},[e._v(e._s(e.$t("voyage.searchShipCompany")))]),e._v(" "),o("el-input",{staticClass:"filter-item",staticStyle:{width:"300px"},attrs:{placeholder:e.$t("common.inputRemind")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.shipComPany,callback:function(t){e.shipComPany=t},expression:"shipComPany"}}),e._v(" "),o("el-button",{attrs:{plain:""},on:{click:e.selectShipComPany}},[e._v(e._s(e.$t("common.select")))]),e._v(" "),o("label",{staticClass:"radio-label",staticStyle:{"padding-left":"20px"}},[e._v(e._s(e.$t("voyage.searchShip")))]),e._v(" "),o("el-input",{staticClass:"filter-item",staticStyle:{width:"300px"},attrs:{placeholder:e.$t("common.inputRemind")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.shipNameOrImoOrRegisterNo,callback:function(t){e.$set(e.listQuery,"shipNameOrImoOrRegisterNo",t)},expression:"listQuery.shipNameOrImoOrRegisterNo"}})],1),e._v(" "),o("div",{staticStyle:{display:"inline-block"}},[o("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[e._v(e._s(e.$t("voyage.searchVoyageName")))]),e._v(" "),o("el-input",{staticClass:"filter-item",staticStyle:{width:"300px"},attrs:{placeholder:e.$t("common.inputRemind")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.volageCode,callback:function(t){e.$set(e.listQuery,"volageCode",t)},expression:"listQuery.volageCode"}}),e._v(" "),o("label",{staticClass:"radio-label",staticStyle:{"padding-left":"100px"}},[e._v(e._s(e.$t("voyage.searchVoyageTime")))]),e._v(" "),o("el-date-picker",{staticStyle:{width:"130px"},attrs:{editable:!0,type:"date",align:"left",placeholder:e.$t("common.datePickerRemind")},model:{value:e.listQuery.startTime,callback:function(t){e.$set(e.listQuery,"startTime",t)},expression:"listQuery.startTime"}}),e._v("\n      ~\n      "),o("el-date-picker",{staticStyle:{width:"130px"},attrs:{editable:!0,type:"date",align:"left",placeholder:e.$t("common.datePickerRemind")},model:{value:e.listQuery.endTime,callback:function(t){e.$set(e.listQuery,"endTime",t)},expression:"listQuery.endTime"}}),e._v(" "),o("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(e._s(e.$t("common.search"))+"\n      ")]),e._v(" "),o("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-setting"},on:{click:e.handleResetFilter}},[e._v(e._s(e.$t("common.reset"))+"\n      ")])],1)]):e._e(),e._v(" "),o("div",{staticClass:"optionBar"},[o("h3",{staticClass:"item-tit",staticStyle:{float:"left"}},[e._v(e._s(e.$t("voyage.Voyagesegmentinformation")))])]),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"},{name:"adaptive",rawName:"v-adaptive",value:{bottomOffset:228},expression:"{bottomOffset: 228}"}],staticStyle:{width:"100%",overflow:"auto",height:"auto"},attrs:{data:e.dataTreeGrid,border:"",fit:"",height:"95px","highlight-current-row":"","row-style":{height:"35px"},"cell-style":{padding:"0"},"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"id"},on:{"current-change":e.handleCurrentChange,"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{label:e.$t("common.no"),type:"index","show-overflow-tooltip":"",width:"50",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyage.voyageLegCode"),"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.volageCode))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyage.imonoAndRegistNo"),"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.imo)+"/"+e._s(a.registerNo))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyage.shipNameView"),"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.shipName)+"/"+e._s(a.shipNameEn))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyage.startDate"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(e._f("datesformat")(a.startTime,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyage.endDate"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(e._f("datesformat")(a.endTime,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyage.EEOI"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.eeoiValue))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyage.CO2Emission"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.carbonDioxideEmission))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyage.speedRatio"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.dropRatio))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyage.LoadUtilization"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.capacityUtilization))])]}}])})],1),e._v(" "),e.eeDataVisiable?o("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)}}}):e._e(),e._v(" "),o("div",[o("el-tabs",{model:{value:e.activeSpectName,callback:function(t){e.activeSpectName=t},expression:"activeSpectName"}},[o("el-tab-pane",{attrs:{label:e.$t("voyagePort.arrival"),name:"first"}},[o("el-table",{staticStyle:{width:"100%",overflow:"auto"},attrs:{data:e.portlist,height:"155px",border:"","highlight-current-row":"","row-style":{height:"35px"},"cell-style":{padding:"0"}}},[o("el-table-column",{attrs:{label:e.$t("voyagePort.NameCn"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.portNameCn))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyagePort.NameEn"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.portName))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyagePort.inPort"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s("0"===a.inPort?e.$t("voyagePort.boundary"):e.$t("voyagePort.Outside")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyagePort.arrTime"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(e._f("datesformat")(a.localArrivalTime,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyagePort.deptTime"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(e._f("datesformat")(a.localFormThePortTime,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyagePort.objective"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.portWork))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyagePort.distance"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.distance))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("common.operate"),align:"center","class-name":"small-padding fixed-width","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleDetailPort(a)}}},[e._v(e._s(e.$t("common.detail"))+"\n              ")])]}}])})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:e.$t("voyagePort.iceOrRescue"),name:"second"}},[o("el-table",{staticStyle:{width:"100%",overflow:"auto"},attrs:{data:e.speclist,height:"155px",border:"","highlight-current-row":"","row-style":{height:"35px"},"cell-style":{padding:"0"}}},[o("el-table-column",{attrs:{label:e.$t("voyagePort.specNameCn"),align:"center",width:"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s("1"===a.recodeType?e.$t("voyage.rescue"):e.$t("voyage.Icenavigation")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyagePort.specTime"),width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(e._f("datesformat")(a.iceStartTime,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyagePort.specEndTime"),width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(e._f("datesformat")(a.iceEndTime,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyagePort.specDistance"),width:"108",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.distance))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyagePort.hfo"),width:"108",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.hfo))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyagePort.lfo"),width:"108",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.lfo))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyagePort.chaifo"),width:"108",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.diesel))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyagePort.otherfo"),width:"108",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.otherOil))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("common.operate"),align:"center",width:"230","class-name":"small-padding fixed-width","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleUpdateSpec(a)}}},[e._v(e._s(e.$t("common.edit"))+"\n              ")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleDetailSpec(a)}}},[e._v(e._s(e.$t("common.detail"))+"\n              ")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDeleteSpec(a)}}},[e._v(e._s(e.$t("common.delete"))+"\n              ")])]}}])})],1)],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:e.$t("voyage.voyageEditText"),visible:e.voyagedialogFormVisible,"close-on-click-modal":e.voyagedialogFormVisible2,width:"80%","append-to-body":!0},on:{"update:visible":function(t){e.voyagedialogFormVisible=t}}},[o("el-form",{ref:"voyagedataForm",staticStyle:{width:"400px","margin-left":"20px"},attrs:{rules:e.voyageRules,model:e.voyageTemp,"label-position":"left","label-width":"70px"}},[o("el-form-item",{attrs:{"label-width":"150px",label:e.$t("voyage.shipName"),prop:"shipName"}},[o("el-input",{staticStyle:{width:"250px"},model:{value:e.voyageTemp.shipName,callback:function(t){e.$set(e.voyageTemp,"shipName",t)},expression:"voyageTemp.shipName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("voyage.voyageCode"),prop:"voyageCode","label-width":"150px"}},[o("el-input",{staticStyle:{width:"250px"},model:{value:e.voyageTemp.voyageCode,callback:function(t){e.$set(e.voyageTemp,"voyageCode",t)},expression:"voyageTemp.voyageCode"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.voyagedialogFormVisiblea}},[e._v(e._s(e.$t("common.close")))]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.voyagedialogStatus?e.createVoyageData():e.updateVoyageData()}}},[e._v(e._s(e.$t("common.save"))+"55\n      ")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:e.$t("voyage.batchImportText"),visible:e.batchImportFormVisible,width:"80%","close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(t){e.batchImportFormVisible=t}}},[o("el-form",{staticStyle:{width:"400px","margin-left":"20px"},attrs:{"label-width":"70px"}}),e._v(" "),o("uploadFiles"),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.batchImportFormVisible=!1}}},[e._v(e._s(e.$t("common.close")))]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.batchImportStatus?e.createVoyageData():e.updateVoyageData()}}},[e._v(e._s(e.$t("common.save"))+"\n      ")])],1)],1),e._v(" "),o("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.$t("voyage.portEditText"),visible:e.portdialogFormVisible,"close-on-click-modal":!1,"custom-class":"customwh","append-to-body":!0,width:"70%"},on:{"update:visible":function(t){e.portdialogFormVisible=t}}},[o("el-form",{ref:"portdataForm",attrs:{rules:e.portRules,model:e.portTemp,"label-position":"left","label-width":"130px"}},[o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.NameEn"),prop:"porten"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.portTemp.porten,callback:function(t){e.$set(e.portTemp,"porten",t)},expression:"portTemp.porten"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.NameCn"),prop:"portcn"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.portTemp.portcn,callback:function(t){e.$set(e.portTemp,"portcn",t)},expression:"portTemp.portcn"}})],1)],1),e._v(" "),o("el-col",{staticStyle:{"padding-left":"20px"},attrs:{span:1}},[o("el-button",{attrs:{plain:""},on:{click:e.selectPort}},[e._v(e._s(e.$t("common.select")))])],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{attrs:{label:e.$t("ship.selectShip"),prop:"shipName"}},[o("el-input",{attrs:{placeholder:e.$t("common.inputRemind"),readonly:!0},model:{value:e.portTemp.shipName,callback:function(t){e.$set(e.portTemp,"shipName",t)},expression:"portTemp.shipName"}})],1)],1),e._v(" "),o("el-col",{staticStyle:{"padding-left":"20px"},attrs:{span:1}},[o("el-button",{attrs:{plain:""},on:{click:e.selectShip}},[e._v(e._s(e.$t("common.select")))])],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.firstVolageCode"),prop:"firstVolageCode"}},[o("el-input",{attrs:{placeholder:e.$t("common.inputRemind"),readonly:e.readOnly},model:{value:e.portTemp.firstVolageCode,callback:function(t){e.$set(e.portTemp,"firstVolageCode",t)},expression:"portTemp.firstVolageCode"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.secondVolageCode"),prop:"secondVolageCode"}},[o("el-input",{attrs:{placeholder:e.$t("common.inputRemind"),readonly:e.readOnly},model:{value:e.portTemp.secondVolageCode,callback:function(t){e.$set(e.portTemp,"secondVolageCode",t)},expression:"portTemp.secondVolageCode"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.arrTime"),prop:"arrTm"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!0,type:"datetime",placeholder:e.$t("common.dateTimeRemind")},model:{value:e.portTemp.arrTm,callback:function(t){e.$set(e.portTemp,"arrTm",t)},expression:"portTemp.arrTm"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.arrZone"),prop:"arrZone"}},[o("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{placeholder:e.$t("common.selectRemind")},model:{value:e.portTemp.arrZone,callback:function(t){e.$set(e.portTemp,"arrZone",t)},expression:"portTemp.arrZone"}},e._l(e.ZoneOptions,(function(e){return o("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),1)],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.deptTime"),prop:"deptTm"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!0,type:"datetime",placeholder:e.$t("common.dateTimeRemind")},model:{value:e.portTemp.deptTm,callback:function(t){e.$set(e.portTemp,"deptTm",t)},expression:"portTemp.deptTm"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.deptZone"),prop:"deptZone"}},[o("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{placeholder:e.$t("common.selectRemind")},model:{value:e.portTemp.deptZone,callback:function(t){e.$set(e.portTemp,"deptZone",t)},expression:"portTemp.deptZone"}},e._l(e.ZoneOptions,(function(e){return o("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),1)],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.distance"),prop:"distance"}},[o("el-input",{attrs:{type:"number",min:"",readonly:e.readOnly},model:{value:e.portTemp.distance,callback:function(t){e.$set(e.portTemp,"distance",t)},expression:"portTemp.distance"}},[o("i",{staticStyle:{color:"red"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("nm")])])],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.inPort"),prop:"inPort"}},[o("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{placeholder:e.$t("common.selectRemind")},model:{value:e.portTemp.inPort,callback:function(t){e.$set(e.portTemp,"inPort",t)},expression:"portTemp.inPort"}},e._l(e.inPortOptions,(function(e){return o("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),1)],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.objective")}},[o("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{placeholder:e.$t("common.selectRemind"),"multiple-limit":10},model:{value:e.portTemp.anchorPurpose,callback:function(t){e.$set(e.portTemp,"anchorPurpose",t)},expression:"portTemp.anchorPurpose"}},e._l(e.objectiveOptions,(function(e){return o("el-option",{key:e.key,attrs:{label:e.display_name,value:e.display_name}})})),1)],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.shorePower")}},[o("el-input",{attrs:{readonly:e.readOnly},model:{value:e.portTemp.shorePower,callback:function(t){e.$set(e.portTemp,"shorePower",t)},expression:"portTemp.shorePower"}},[o("i",{staticStyle:{color:"red"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("KWH")])])],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.isEU")}},[o("el-checkbox",{model:{value:e.portTemp.isEu,callback:function(t){e.$set(e.portTemp,"isEu",t)},expression:"portTemp.isEu"}})],1)],1)],1)],1),e._v(" "),o("el-row",[o("el-tabs",{staticStyle:{height:"100%","overflow-y":"auto","overflow-x":"hidden"},attrs:{value:"first",type:"border-card"}},[o("el-tab-pane",{attrs:{label:e.$t("voyageOil.Arrivalcargo"),name:"first"}},[o("arrCargoInfo",{ref:"arrCargoInfo",attrs:{"edit-status":this.portdialogStatus,"port-edit-row-id":this.portEditRowId}})],1),e._v(" "),o("el-tab-pane",{attrs:{label:e.$t("voyageOil.Departurecargo"),name:"second"}},[o("deptCargoInfo",{ref:"deptCargoInfo",attrs:{"edit-status":this.portdialogStatus,"port-edit-row-id":this.portEditRowId}})],1)],1)],1),e._v(" "),o("el-row",[o("el-tabs",{staticStyle:{height:"100%","overflow-y":"auto","overflow-x":"hidden"},attrs:{value:"one",type:"border-card"}},[o("el-tab-pane",{attrs:{label:e.$t("voyageOil.arrDeptPortOil"),name:"one"}},[o("oilTons",{ref:"oilTons",attrs:{"edit-status":this.portdialogStatus,"port-edit-row-id":this.portEditRowId,"port-row-model":this.portRowModel}})],1),e._v(" "),o("el-tab-pane",{attrs:{label:e.$t("voyageOil.addOil"),name:"two"}},[o("Fuelquantity")],1),e._v(" "),o("el-tab-pane",{attrs:{label:e.$t("voyageOil.outOil"),name:"star"}},[o("Bargeoilvolume")],1),e._v(" "),o("el-tab-pane",{attrs:{label:e.$t("voyageOil.barge"),name:"tvit"}},[o("bargeInfo")],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.portdialogFormVisible=!1}}},[e._v(e._s(e.$t("common.close")))]),e._v(" "),e.readOnly?e._e():o("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.portdialogStatus?e.createPortData():e.updatePortData()}}},[e._v(e._s(e.$t("common.save"))+"\n      ")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:e.$t("voyage.driftEditText"),visible:e.driftdialogFormVisible,"close-on-click-modal":!1,width:"80%","append-to-body":!0},on:{"update:visible":function(t){e.driftdialogFormVisible=t}}},[o("el-form",{ref:"driftdataForm",attrs:{rules:e.rules,model:e.driftTemp,"label-position":"left","label-width":"200px"}},[o("el-row",[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("voyageSpec.recordType"),"label-width":"100px"}},[o("el-radio-group",{staticStyle:{width:"200px"},model:{value:e.driftTemp.recordType,callback:function(t){e.$set(e.driftTemp,"recordType",t)},expression:"driftTemp.recordType"}},[o("span",{staticClass:"anchoring_pm",on:{click:function(t){return e.anchoring(1)}}},[o("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("voyageOil.Anchoringontheway")))])],1),e._v(" "),o("span",{on:{click:function(t){return e.anchoring(2)}}},[o("el-radio",{attrs:{label:2}},[e._v(e._s(e.$t("voyageOil.Floatingontheway")))])],1)])],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{attrs:{label:e.$t("ship.selectShip"),prop:"shipName"}},[o("el-input",{attrs:{placeholder:e.$t("common.inputRemind"),readonly:!0},model:{value:e.driftTemp.shipName,callback:function(t){e.$set(e.driftTemp,"shipName",t)},expression:"driftTemp.shipName"}})],1)],1),e._v(" "),o("el-col",{staticStyle:{"padding-left":"20px"},attrs:{span:1}},[o("el-button",{attrs:{plain:""},on:{click:e.selectShip}},[e._v(e._s(e.$t("common.select")))])],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.volageCode"),prop:"firstVolageCode"}},[o("el-input",{attrs:{placeholder:e.$t("common.inputRemind"),readonly:e.readOnly},model:{value:e.driftTemp.firstVolageCode,callback:function(t){e.$set(e.driftTemp,"firstVolageCode",t)},expression:"driftTemp.firstVolageCode"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:7}},[o("el-form-item",{attrs:{label:e.$t("voyageSpec.beginTime"),"label-width":"100px"}},[o("el-date-picker",{staticStyle:{width:"200px"},attrs:{editable:!0,type:"datetime",placeholder:e.$t("common.dateTimeRemind"),align:"left"},model:{value:e.driftTemp.arrTm,callback:function(t){e.$set(e.driftTemp,"arrTm",t)},expression:"driftTemp.arrTm"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:e.$t("voyageSpec.endTime"),"label-width":"150px"}},[o("el-date-picker",{staticStyle:{width:"200px"},attrs:{editable:!0,type:"datetime",placeholder:e.$t("common.dateTimeRemind"),align:"left"},model:{value:e.driftTemp.deptTm,callback:function(t){e.$set(e.driftTemp,"deptTm",t)},expression:"driftTemp.deptTm"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:e.$t("voyageSpec.zone"),prop:"name","label-width":"150px"}},[o("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:e.$t("common.selectRemind")},model:{value:e.driftTemp.arrZone,callback:function(t){e.$set(e.driftTemp,"arrZone",t)},expression:"driftTemp.arrZone"}},e._l(e.ZoneOptions,(function(e){return o("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),1)],1)],1)],1),e._v(" "),e.Anchoringontheway?o("el-row",[o("oilTons",{ref:"driftOilTons",attrs:{"edit-status":e.portdialogStatus,"port-edit-row-id":e.portEditRowId,"port-row-model":{portRowModel:e.portRowModel}}})],1):e._e()],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.driftdialogFormVisible=!1}}},[e._v(e._s(e.$t("common.close")))]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createDriftData()}}},[e._v(e._s(e.$t("common.save")))])],1)],1),e._v(" "),o("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{height:"80%"},attrs:{title:e.$t("voyage.specEditText"),visible:e.specdialogFormVisible,"close-on-click-modal":!1,"custom-class":"customwh","append-to-body":!0},on:{"update:visible":function(t){e.specdialogFormVisible=t}}},[o("el-form",{ref:"specdataForm",attrs:{rules:e.rules,model:e.specTemp,"label-position":"left","label-width":"130px"}},[o("el-row",[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("voyageSpec.recordType")}},[o("el-radio-group",{model:{value:e.specTemp.recordType,callback:function(t){e.$set(e.specTemp,"recordType",t)},expression:"specTemp.recordType"}},[o("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("voyage.Icenavigation")))]),e._v(" "),o("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("voyage.Rescue")))])],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{label:e.$t("ship.selectShip"),prop:"shipName"}},[o("el-input",{attrs:{placeholder:e.$t("common.inputRemind"),readonly:!0},model:{value:e.specTemp.shipName,callback:function(t){e.$set(e.specTemp,"shipName",t)},expression:"specTemp.shipName"}})],1)],1),e._v(" "),o("el-col",{staticStyle:{"padding-left":"20px"},attrs:{span:1}},[o("el-button",{attrs:{plain:""},on:{click:e.selectShip}},[e._v(e._s(e.$t("common.select")))])],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.volageCode"),prop:"voyageCode"}},[o("el-input",{attrs:{placeholder:e.$t("common.inputRemind"),readonly:e.specReadOnly},model:{value:e.specTemp.voyageCode,callback:function(t){e.$set(e.specTemp,"voyageCode",t)},expression:"specTemp.voyageCode"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:e.$t("voyagePort.specDistance"),prop:"distance"}},[o("el-input",{attrs:{placeholder:e.$t("common.inputRemind"),readonly:e.specReadOnly},model:{value:e.specTemp.distance,callback:function(t){e.$set(e.specTemp,"distance",t)},expression:"specTemp.distance"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:e.$t("voyageSpec.beginTime")}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!0,type:"datetime",placeholder:e.$t("common.dateTimeRemind")},model:{value:e.specTemp.beginTm,callback:function(t){e.$set(e.specTemp,"beginTm",t)},expression:"specTemp.beginTm"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:e.$t("voyageSpec.endTime")}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!0,type:"datetime",placeholder:e.$t("common.dateTimeRemind")},model:{value:e.specTemp.endTm,callback:function(t){e.$set(e.specTemp,"endTm",t)},expression:"specTemp.endTm"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:e.$t("voyageSpec.zone")}},[o("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{placeholder:e.$t("common.selectRemind")},model:{value:e.specTemp.beginZone,callback:function(t){e.$set(e.specTemp,"beginZone",t)},expression:"specTemp.beginZone"}},e._l(e.ZoneOptions,(function(e){return o("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),1)],1)],1)],1),e._v(" "),o("el-row",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.specOilFormData,stripe:"",border:"",size:"mini"}},[o("el-table-column",{attrs:{label:e.$t("voyageOil.oilType"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("span",[e._v(e._s(a.oilName))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyageOil.fuelConsumption"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("el-input",{staticClass:"el_input",attrs:{readonly:e.specReadOnly},model:{value:a.consTons,callback:function(t){e.$set(a,"consTons",t)},expression:"row.consTons"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyageOil.outOil"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("el-input",{staticClass:"el_input",attrs:{readonly:e.specReadOnly},model:{value:a.outTons,callback:function(t){e.$set(a,"outTons",t)},expression:"row.outTons"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("voyageOil.outOilTime"),align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("el-date-picker",{staticStyle:{width:"95%"},attrs:{editable:!0,type:"datetime",placeholder:e.$t("common.dateTimeRemind")},model:{value:a.outTm,callback:function(t){e.$set(a,"outTm",t)},expression:"row.outTm"}})]}}])})],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.specdialogFormVisible=!1}}},[e._v(e._s(e.$t("common.close")))]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.specdialogStatus?e.createData():e.updateSpecData()}}},[e._v(e._s(e.$t("common.save"))+"\n      ")])],1)],1),e._v(" "),o("shipSelect",{ref:"shipSelect"}),e._v(" "),o("portSelect",{ref:"portSelect"}),e._v(" "),o("ShipComPanySelect",{ref:"shipComPanySelect"}),e._v(" "),o("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{height:"80%"},attrs:{title:"$t('voyage.Energyefficiencystatus')",visible:e.eestatusVisible,"close-on-click-modal":!1,"custom-class":"customwh","append-to-body":!0},on:{"update:visible":function(t){e.eestatusVisible=t}}})],1)},i=[],r=o("97e4"),l=o("333d"),s=o("f2ea"),n=o("3e84"),p=o("9606"),d=o("1593"),c=o("c061"),m=o("1905"),u=o("c297"),f=o("066f"),h=o("bff4"),v=o("2e0b"),y=o("cd38"),g=o("e244"),T=o("0b96"),b=[{key:"-8",display_name:"-8"},{key:"0",display_name:"0"},{key:"8",display_name:"8"}],_=[{key:"0",display_name:"港界内"},{key:"1",display_name:"港界外"}],$=[{key:"1",display_name:"装货/登离乘客"},{key:"2",display_name:"卸货/登离乘客"},{key:"3",display_name:"等待泊位"}],S={name:"EnergyEfficiency",components:{ElRow:v["a"],Pagination:l["a"],arrCargoInfo:s["default"],deptCargoInfo:n["default"],oilTons:p["default"],uploadFiles:c["default"],shipSelect:m["a"],portSelect:u["a"],ShipComPanySelect:f["a"],Fuelquantity:y["default"],Bargeoilvolume:g["default"],bargeInfo:T["default"]},directives:{adaptive:d["a"]},filters:{statusFilter:function(e){var t={0:"lock",1:"unlock",null:"--"};return t[e]}},data:function(){var e=this,t=function(t,o,a){""!==o&&""===e.portTemp.firstVolageCode?a(new Error("Please input the arrival voyage number.")):a()};return{value:[],multipleSelection:[],specOilForm:{},shipComPany:"",speclist:[],activeSpectName:"first",oilFormData:[],specOilFormData:[],specTempOilFormData:[],lockStatus:0,readOnly:!1,specReadOnly:!1,Anchoringontheway:!0,portlist:[],dataTreeGrid:[],total:0,listLoading:!0,portListLoading:!0,listQuery:{currentPage:1,pageSize:20,shipComPanyName:"",shipNameOrImoOrRegisterNo:"",volageCode:"",startTime:null,endTime:null},ZoneOptions:b,inPortOptions:_,objectiveOptions:$,voyageTemp:{id:void 0,shipName:"",voyageCode:""},portTemp:{id:"",shipId:"",shipName:"",firstVolageCode:"",secondVolageCode:"",portid:"",porten:"",portcn:"",arrTm:"",arrZone:"",deptTm:"",deptZone:"",isEu:"",inPort:"0",distance:"",anchorPurpose:"",recordType:"0",shorePower:"",portOilInfos:[],volagePortLoadingInfos:[]},portEditRowId:"",portRowModel:[],driftTemp:{id:"",porten:"anchor",portcn:"抛锚",shipId:"",shipName:"",firstVolageCode:"",arrTm:"",arrZone:"",deptTm:"",recordType:1,portOilInfos:[],volagePortLoadingInfos:[]},specTemp:{id:"",shipId:"",shipName:"",voyageCode:"",distance:0,recordType:0,beginZone:"",beginTm:null,endTm:null,volageSpecCons:[]},portdialogFormVisible:!1,driftdialogFormVisible:!1,voyagedialogFormVisible:!1,voyagedialogFormVisible2:!1,specdialogFormVisible:!1,batchImportFormVisible:!1,voyagedialogStatus:"",portdialogStatus:"",driftdialogStatus:"",specdialogStatus:"",batchImportStatus:"",voyageRules:{voyageCode:[{required:!0,message:"必填项",trigger:"blur"}],shipName:[{required:!0,message:"必填项",trigger:"blur"}]},portRules:{porten:[{required:!0,message:"必填项",trigger:"change"}],portcn:[{required:!0,message:"必填项",trigger:"change"}],arrTm:[{required:!0,message:"必填项",trigger:"change"}],arrZone:[{required:!0,message:"必填项",trigger:"change"}],deptTm:[{required:!0,message:"必填项",trigger:"change"}],deptZone:[{required:!0,message:"必填项",trigger:"change"}],inPort:[{required:!0,message:"必填项",trigger:"change"}],distance:[{required:!0,message:"必填项",trigger:"blur"}],shipName:[{required:!0,message:"必填项",trigger:"change"}],secondVolageCode:[{validator:t,trigger:"blur"}]},rules:{},eeDataVisiable:!0,eestatusVisible:!1}},created:function(){this.getFuelList()},methods:{handTime:function(){this.listQuery.startTime=this.value[0],this.listQuery.endTime=this.value[1]},voyagedialogFormVisiblea:function(){this.voyagedialogFormVisible=!1,this.voyagedialogFormVisible2=!0},handleGeneratorVolage:function(){var e=this;0!==this.multipleSelection.length?Object(r["g"])({generatorVolageDtos:this.multipleSelection}).then((function(t){t.data.result?e.$notify({title:"Success",message:t.data.data,type:"success",duration:2e3}):e.$notify({title:"Error",message:t.data.data,type:"error",duration:2e3})})):this.$notify({message:"请选择航次",type:"info",duration:2e3})},handleSelectionChange:function(e){this.multipleSelection=e},resetListQuery:function(){this.value=[],this.listQuery={currentPage:1,pageSize:20,shipComPanyName:"",shipNameOrImoOrRegisterNo:"",volageCode:"",startTime:null,endTime:null}},resetOilFormData:function(){var e=!0,t=!1,o=void 0;try{for(var a,i=this.oilFormData[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var r=a.value;r.id="",r.arrTons=0,r.deptTons=0,r.addTons=0,r.addBillNo="",r.addTm=null,r.outTons=0,r.outTm=null,r.correctTons=0}}catch(l){t=!0,o=l}finally{try{e||null==i.return||i.return()}finally{if(t)throw o}}},resetSpecFormData:function(){var e=!0,t=!1,o=void 0;try{for(var a,i=this.specTempOilFormData[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var r=a.value;r.id="",r.outTons=0,r.outTm=null,r.consTons=0}}catch(l){t=!0,o=l}finally{try{e||null==i.return||i.return()}finally{if(t)throw o}}},getFuelList:function(){var e=this;Object(h["k"])("/fuel/findFuelList",{pageSize:50,pageNum:1}).then((function(t){var o=[],a=[],i=!0,r=!1,l=void 0;try{for(var s,n=t.data.data.items[Symbol.iterator]();!(i=(s=n.next()).done);i=!0){var p=s.value,d={id:"",oilId:"",oilName:"",arrTons:0,deptTons:0,addTons:0,addBillNo:"",addTm:null,outTons:0,outTm:null,correctTons:0},c={id:"",oilId:"",oilName:"",consTons:0,outTons:0,outTm:null};d.oilId=p.fuelCode,d.oilName=p.fuelName,c.oilId=p.fuelCode,c.oilName=p.fuelName,o.push(d),a.push(c)}}catch(m){r=!0,l=m}finally{try{i||null==n.return||n.return()}finally{if(r)throw l}}e.oilFormData=o,e.specTempOilFormData=a}))},lockOrUnLock:function(e){var t=this;Object(r["i"])(e).then((function(e){e.data.result?t.$notify({title:"Success",message:"Successfully",type:"success",duration:2e3}):t.$notify({title:"Error",message:"Failed",type:"error",duration:2e3})}))},handleCurrentChange:function(e){this.portlist=e.voyagePortVos,this.speclist=e.voyageSpecVos},selectShip:function(){this.$refs.shipSelect.handleCreateRelation()},selectPort:function(){this.$refs.portSelect.handleCreateRelation()},selectShipComPany:function(){this.$refs.shipComPanySelect.handleCreateRelation()},anchoring:function(e){1===e&&(this.driftTemp.portcn="抛锚",this.driftTemp.porten="anchor",this.Anchoringontheway=!0),2===e&&(this.driftTemp.portcn="漂航",this.driftTemp.porten="drifting",this.Anchoringontheway=!1)},getList:function(){var e=this;this.listLoading=!0,null!==this.listQuery.startTime&&null!==this.listQuery.endTime&&(this.listQuery.startTime=this.listQuery.startTime.toString(),this.listQuery.endTime=this.listQuery.endTime.toString()),Object(r["m"])(this.listQuery).then((function(t){e.dataTreeGrid=t.data.data.items,0!==t.data.data.items.length&&(e.portlist=t.data.data.items[0].voyagePortVos,e.speclist=t.data.data.items[0].voyageSpecVos),e.total=t.data.data.total,setTimeout((function(){e.listLoading=!1}),20)}))},getPortList:function(){var e=this;this.portListLoading=!0,Object(r["j"])().then((function(t){e.portlist=t.data.items,e.total=t.data.total,setTimeout((function(){e.portListLoading=!1}),1500)}))},handleFilter:function(){this.listQuery.page=1,this.getList()},handleResetFilter:function(){this.resetListQuery(),this.shipComPany="",this.getList()},handleModifyStatus:function(e){alert(e.recStatus),"0"===e.recStatus&&this.lockOrUnLock({volageId:e.id,recStatus:"1"}),"1"===e.recStatus&&this.lockOrUnLock({volageId:e.id,recStatus:"0"}),this.getList()},resetVoyageTemp:function(){this.voyageTemp={id:void 0,shipName:"",voyageCode:""}},handleCreateVoyage:function(){var e=this;this.resetVoyageTemp(),this.voyagedialogStatus="create",this.voyagedialogFormVisible=!0,this.voyagedialogFormVisible2=!1,this.$nextTick((function(){e.$refs["voyagedataForm"].clearValidate()}))},resetPortTemp:function(){this.portTemp={id:void 0,shipId:"",shipName:"",firstVolageCode:"",secondVolageCode:"",portid:"",porten:"",portcn:"",arrTm:"",arrZone:"",deptTm:"",deptZone:"",isEu:"",inPort:"0",distance:"",anchorPurpose:"",recordType:"0",shorePower:"",portOilInfos:[],volagePortLoadingInfos:[]}},handleCreatePort:function(){var e=this;this.resetPortTemp(),this.resetOilFormData(),this.portdialogStatus="create",this.portdialogFormVisible=!0,this.readOnly=!1,setTimeout((function(){e.resetOilFormData(),e.$refs.oilTons.oilFormData=e.oilFormData}),100),this.$nextTick((function(){e.$refs.oilTons.readOnly=!1,e.$refs.arrCargoInfo.readonly=!1,e.$refs.deptCargoInfo.readonly=!1,e.$refs["portdataForm"].clearValidate(),e.$refs.arrCargoInfo.resetArrTemp(),e.$refs.deptCargoInfo.resetDeptTemp()}))},resetDriftTemp:function(){this.driftTemp={id:"",shipId:"",shipName:"",porten:"anchor",portcn:"抛锚",firstVolageCode:"",arrTm:"",arrZone:"",deptTm:"",recordType:1,portOilInfos:[],volagePortLoadingInfos:[]}},handleCreateDrift:function(){var e=this;this.resetDriftTemp(),this.driftdialogStatus="create",this.driftdialogFormVisible=!0,this.Anchoringontheway=!0,setTimeout((function(){e.readOnly=!1,e.$refs.driftOilTons.readOnly=!1,e.resetOilFormData(),e.$refs.driftOilTons.oilFormData=e.oilFormData}),100),this.$nextTick((function(){e.$refs["driftdataForm"].clearValidate()}))},resetSpecTemp:function(){this.specTemp={id:"",shipId:"",shipName:"",voyageCode:"",distance:0,recordType:0,beginZone:"",beginTm:null,endTm:null,volageSpecCons:[]}},handleCreateBatch:function(){this.resetSpecTemp(),this.batchImportFormVisible=!0,this.batchImportStatus="create"},handleCreateSpec:function(){var e=this;this.resetSpecTemp(),this.resetSpecFormData(),this.specOilFormData=this.specTempOilFormData,this.specdialogStatus="create",this.specdialogFormVisible=!0,this.specReadOnly=!1,this.$nextTick((function(){e.$refs["specdataForm"].clearValidate()}))},createVoyageData:function(){var e=this;this.$refs["voyagedataForm"].validate((function(t){t&&(e.voyageTemp.id=parseInt(100*Math.random())+1024,e.voyageTemp.author="vue-element-admin",Object(r["c"])(e.voyageTemp).then((function(){e.dataTreeGrid.unshift(e.voyageTemp),e.voyagedialogFormVisible=!1,e.voyagedialogFormVisible2=!0,e.$notify({title:"Success",message:"Created Successfully",type:"success",duration:2e3})})))}))},createPortData:function(){var e=this,t=[],o=!0,a=!1,i=void 0;try{for(var l,s=this.$refs.oilTons.oilFormData[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var n=l.value;0!==n.arrTons&&0!==n.deptTons&&t.push(n)}}catch(d){a=!0,i=d}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}this.portTemp.portOilInfos=t;var p=[];p.push(this.$refs.arrCargoInfo.arrTemp),p.push(this.$refs.deptCargoInfo.deptTemp),this.portTemp.volagePortLoadingInfos=p,this.$refs["portdataForm"].validate((function(t){t&&Object(r["b"])(e.portTemp).then((function(t){t.data.result?e.$notify({title:"Success",message:"Created Successfully",type:"success",duration:2e3}):e.$notify({title:"Error",message:"Created Failed",type:"error",duration:2e3}),e.getList(),e.portdialogFormVisible=!1}))}))},handleUpdateVoyage:function(e){var t=this;this.voyageTemp=Object.assign({},e),this.voyageTemp.timestamp=new Date(this.voyageTemp.timestamp),this.voyagedialogStatus="update",this.voyagedialogFormVisible=!0,this.$nextTick((function(){t.$refs["voyagedataForm"].clearValidate()}))},updateVoyageData:function(){var e=this;this.$refs["voyagedataForm"].validate((function(t){if(t){var o=Object.assign({},e.voyageTemp);o.timestamp=+new Date(o.timestamp),Object(r["l"])(o).then((function(){var t=!0,o=!1,a=void 0;try{for(var i,r=e.dataTreeGrid[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var l=i.value;if(l.id===e.temp.id){var s=e.dataTreeGrid.indexOf(l);e.dataTreeGrid.splice(s,1,e.temp);break}}}catch(n){o=!0,a=n}finally{try{t||null==r.return||r.return()}finally{if(o)throw a}}e.dialogFormVisible=!1,e.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3})}))}}))},handleDeleteVoyage:function(e){var t=this;!0===confirm("确认是否删除航次")&&Object(r["f"])({volageIdList:[e.id]}).then((function(e){e.data.result?t.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3}):t.$notify({title:"Error",message:"Delete Failed",type:"error",duration:2e3})}))},handleUpdatePort:function(e){var t=this;this.resetDriftTemp(),this.resetOilFormData(),1===e.recodeType?(this.driftTemp.id=e.id,this.driftTemp.recordType=e.recodeType,this.driftTemp.porten=e.portName,this.driftTemp.portcn=e.portNameCn,this.driftTemp.arrTm=e.arrivalTime,this.driftTemp.deptTm=e.formThePortTime,this.driftTemp.arrZone=e.arrZone,this.driftTemp.shipId=e.shipId,this.driftTemp.shipName=e.shipName,this.driftTemp.firstVolageCode=e.firstVolageCode,this.driftdialogFormVisible=!0,this.Anchoringontheway=!0,setTimeout((function(){t.readOnly=!1,t.$refs.driftOilTons.readOnly=!1;var o=e.voyagePortOilVos,a=[],i=!0,r=!1,l=void 0;try{for(var s,n=t.oilFormData[Symbol.iterator]();!(i=(s=n.next()).done);i=!0){var p=s.value;a.push(p)}}catch(m){r=!0,l=m}finally{try{i||null==n.return||n.return()}finally{if(r)throw l}}for(var d=0;d<o.length;d++)if(0!==o[d].arrTons&&0!==o[d].deptTons&&null!==o[d].arrTons&&null!==o[d].deptTons)for(var c=0;c<a.length;c++)a[c].oilId===o[d].oilId&&a.splice(c,1,o[d]);t.$refs.driftOilTons.oilFormData=a}),100),this.$nextTick((function(){t.$refs["driftdataForm"].clearValidate()}))):2===e.recodeType?(this.driftTemp.id=e.id,this.driftTemp.recordType=e.recodeType,this.driftTemp.porten=e.portName,this.driftTemp.portcn=e.portNameCn,this.driftTemp.arrTm=e.arrivalTime,this.driftTemp.deptTm=e.formThePortTime,this.driftTemp.arrZone=e.arrZone,this.driftTemp.shipId=e.shipId,this.driftTemp.shipName=e.shipName,this.driftTemp.firstVolageCode=e.firstVolageCode,this.driftdialogFormVisible=!0,this.Anchoringontheway=!1,this.$nextTick((function(){t.readOnly=!1,t.$refs["driftdataForm"].clearValidate()}))):(this.portTemp.shipName=e.shipName,this.portTemp.shipId=e.shipId,this.portTemp.firstVolageCode=e.firstVolageCode,this.portTemp.secondVolageCode=e.secondVolageCode,this.portTemp.arrZone=e.arrZone,this.portTemp.deptZone=e.deptZone,this.portTemp.shorePower=e.shorePower,this.portTemp.distance=e.distance,this.portTemp.isEu=1===e.isEu,this.portTemp.portid=e.portId,this.portTemp.id=e.id,this.portTemp.porten=e.portName,this.portTemp.portcn=e.portNameCn,this.portTemp.arrTm=e.arrivalTime,this.portTemp.deptTm=e.formThePortTime,this.portTemp.anchorPurpose=null===e.portWork?"":e.portWork,this.portdialogStatus="update",this.portdialogFormVisible=!0,this.readOnly=!1,setTimeout((function(){t.$refs.oilTons.readOnly=!1,t.$refs.arrCargoInfo.readonly=!1,t.$refs.deptCargoInfo.readonly=!1;var o=e.voyagePortOilVos,a=[],i=!0,r=!1,l=void 0;try{for(var s,n=t.oilFormData[Symbol.iterator]();!(i=(s=n.next()).done);i=!0){var p=s.value;a.push(p)}}catch(g){r=!0,l=g}finally{try{i||null==n.return||n.return()}finally{if(r)throw l}}for(var d=0;d<o.length;d++)if(0!==o[d].arrTons&&0!==o[d].deptTons&&null!==o[d].arrTons&&null!==o[d].deptTons)for(var c=0;c<a.length;c++)a[c].oilId===o[d].oilId&&a.splice(c,1,o[d]);t.$refs.oilTons.oilFormData=a,t.$refs.deptCargoInfo.resetDeptTemp(),t.$refs.arrCargoInfo.resetArrTemp();var m=!0,u=!1,f=void 0;try{for(var h,v=e.volagePortLordingVos[Symbol.iterator]();!(m=(h=v.next()).done);m=!0){var y=h.value;"0"===y.loadingType?t.$refs.deptCargoInfo.deptTemp=y:"1"===y.loadingType&&(t.$refs.arrCargoInfo.arrTemp=y)}}catch(g){u=!0,f=g}finally{try{m||null==v.return||v.return()}finally{if(u)throw f}}}),100),this.$nextTick((function(){t.$refs["portdataForm"].clearValidate()})))},handleDetailPort:function(e){var t=this;this.resetOilFormData(),this.resetDriftTemp(),1===e.recodeType?(this.driftTemp.id=e.id,this.driftTemp.recordType=e.recodeType,this.driftTemp.porten=e.portName,this.driftTemp.portcn=e.portNameCn,this.driftTemp.arrTm=e.arrivalTime,this.driftTemp.deptTm=e.formThePortTime,this.driftTemp.arrZone=e.arrZone,this.driftTemp.shipId=e.shipId,this.driftTemp.shipName=e.shipName,this.driftTemp.firstVolageCode=e.firstVolageCode,this.driftdialogFormVisible=!0,this.Anchoringontheway=!0,setTimeout((function(){t.readOnly=!0,t.$refs.driftOilTons.readOnly=!0;var o=e.voyagePortOilVos,a=[],i=!0,r=!1,l=void 0;try{for(var s,n=t.oilFormData[Symbol.iterator]();!(i=(s=n.next()).done);i=!0){var p=s.value;a.push(p)}}catch(m){r=!0,l=m}finally{try{i||null==n.return||n.return()}finally{if(r)throw l}}for(var d=0;d<o.length;d++)if(0!==o[d].arrTons&&0!==o[d].deptTons&&null!==o[d].arrTons&&null!==o[d].deptTons)for(var c=0;c<a.length;c++)a[c].oilId===o[d].oilId&&a.splice(c,1,o[d]);t.$refs.driftOilTons.oilFormData=a}),100),this.$nextTick((function(){t.$refs["driftdataForm"].clearValidate()}))):2===e.recodeType?(this.driftTemp.id=e.id,this.driftTemp.recordType=e.recodeType,this.driftTemp.porten=e.portName,this.driftTemp.portcn=e.portNameCn,this.driftTemp.arrTm=e.arrivalTime,this.driftTemp.deptTm=e.formThePortTime,this.driftTemp.arrZone=e.arrZone,this.driftTemp.shipId=e.shipId,this.driftTemp.shipName=e.shipName,this.driftTemp.firstVolageCode=e.firstVolageCode,this.driftdialogFormVisible=!0,this.Anchoringontheway=!1,this.$nextTick((function(){t.readOnly=!0,t.$refs["driftdataForm"].clearValidate()}))):(this.portTemp.shipName=e.shipName,this.portTemp.shipId=e.shipId,this.portTemp.firstVolageCode=e.firstVolageCode,this.portTemp.secondVolageCode=e.secondVolageCode,this.portTemp.arrZone=e.arrZone,this.portTemp.deptZone=e.deptZone,this.portTemp.shorePower=e.shorePower,this.portTemp.distance=e.distance,this.portTemp.isEu=1===e.isEu,this.portTemp.portid=e.portId,this.portTemp.id=e.id,this.portTemp.porten=e.portName,this.portTemp.portcn=e.portNameCn,this.portTemp.arrTm=e.arrivalTime,this.portTemp.deptTm=e.formThePortTime,this.portTemp.anchorPurpose=null===e.portWork?"":e.portWork,this.portdialogStatus="update",this.portdialogFormVisible=!0,setTimeout((function(){t.readOnly=!0,t.$refs.oilTons.readOnly=!0,t.$refs.arrCargoInfo.readonly=!0,t.$refs.deptCargoInfo.readonly=!0;var o=e.voyagePortOilVos,a=[],i=!0,r=!1,l=void 0;try{for(var s,n=t.oilFormData[Symbol.iterator]();!(i=(s=n.next()).done);i=!0){var p=s.value;a.push(p)}}catch(g){r=!0,l=g}finally{try{i||null==n.return||n.return()}finally{if(r)throw l}}for(var d=0;d<o.length;d++)if(0!==o[d].arrTons&&0!==o[d].deptTons&&null!==o[d].arrTons&&null!==o[d].deptTons)for(var c=0;c<a.length;c++)a[c].oilId===o[d].oilId&&a.splice(c,1,o[d]);if(t.$refs.oilTons.oilFormData=a,t.$refs.deptCargoInfo.resetDeptTemp(),t.$refs.arrCargoInfo.resetArrTemp(),void 0!=e.volagePortLordingVos){var m=!0,u=!1,f=void 0;try{for(var h,v=e.volagePortLordingVos[Symbol.iterator]();!(m=(h=v.next()).done);m=!0){var y=h.value;"0"===y.loadingType?t.$refs.deptCargoInfo.deptTemp=y:"1"===y.loadingType&&(t.$refs.arrCargoInfo.arrTemp=y)}}catch(g){u=!0,f=g}finally{try{m||null==v.return||v.return()}finally{if(u)throw f}}}}),100),this.$nextTick((function(){t.$refs["portdataForm"].clearValidate()})))},updatePortData:function(){var e=this,t=[],o=!0,a=!1,i=void 0;try{for(var l,s=this.$refs.oilTons.oilFormData[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var n=l.value;0!==n.arrTons&&0!==n.deptTons&&t.push(n)}}catch(d){a=!0,i=d}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}this.portTemp.portOilInfos=t;var p=[];p.push(this.$refs.arrCargoInfo.arrTemp),p.push(this.$refs.deptCargoInfo.deptTemp),this.portTemp.volagePortLoadingInfos=p,this.$refs["portdataForm"].validate((function(t){t&&Object(r["k"])(e.portTemp).then((function(t){t.data.result?e.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3}):e.$notify({title:"Error",message:"Update Failed",type:"error",duration:2e3}),e.getList(),e.portdialogFormVisible=!1}))}))},handleDeletePort:function(e){var t=this;!0===confirm("确认是否删除")&&(Object(r["d"])({volagePortIdList:[e.id]}).then((function(e){e.data.result?t.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3}):t.$notify({title:"Error",message:"Delete Failed",type:"error",duration:2e3})})),this.getList())},handleDeleteSpec:function(e){var t=this;!0===confirm("确认是否删除")&&(Object(r["e"])({volageIceAndRescueIdList:[e.id]}).then((function(e){e.data.result?t.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3}):t.$notify({title:"Error",message:"Delete Failed",type:"error",duration:2e3})})),this.getList())},handleUpdateSpec:function(e){var t=this;this.resetSpecFormData(),this.specdialogStatus="update",this.specTemp.id=e.id,this.specTemp.distance=e.distance,this.specTemp.beginTm=e.iceStartTime,this.specTemp.endTm=e.iceEndTime,this.specTemp.shipId=e.shipId,this.specTemp.shipName=e.shipName,this.specTemp.distance=e.distance,this.specTemp.voyageCode=e.voyageCode,this.specTemp.beginZone=e.beginZone;var o=e.rawVoyageSpecConsVos;setTimeout((function(){var e=[],a=!0,i=!1,r=void 0;try{for(var l,s=t.specTempOilFormData[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var n=l.value;e.push(n)}}catch(c){i=!0,r=c}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}for(var p=0;p<o.length;p++)if(0!==o[p].consTons&&""!==o[p].consTons||0!==o[p].outTons&&""!==o[p].outTons)for(var d=0;d<e.length;d++)e[d].oilId===o[p].oilId&&e.splice(d,1,o[p]);t.specOilFormData=e}),100),this.specdialogFormVisible=!0,this.specReadOnly=!1},handleDetailSpec:function(e){var t=this;this.specdialogStatus="update",this.specTemp.id=e.id,this.specTemp.distance=e.distance,this.specTemp.beginTm=e.iceStartTime,this.specTemp.endTm=e.iceEndTime,this.specTemp.shipId=e.shipId,this.specTemp.shipName=e.shipName,this.specTemp.distance=e.distance,this.specTemp.voyageCode=e.voyageCode,this.specTemp.beginZone=e.beginZone;var o=e.rawVoyageSpecConsVos;setTimeout((function(){var e=[],a=!0,i=!1,r=void 0;try{for(var l,s=t.specTempOilFormData[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var n=l.value;e.push(n)}}catch(c){i=!0,r=c}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}for(var p=0;p<o.length;p++)if(0!==o[p].consTons&&""!==o[p].consTons||0!==o[p].outTons&&""!==o[p].outTons)for(var d=0;d<e.length;d++)e[d].oilId===o[p].oilId&&e.splice(d,1,o[p]);t.specOilFormData=e}),100),this.specdialogFormVisible=!0,this.specReadOnly=!0},setRawVoyageSpecConsDto:function(e){var t=[];if(0!==e.dieselOil&&""!==e.dieselOil){var o={id:e.dieselOilId,oilId:"3",oilName:"柴油/汽油",consTons:e.dieselOil};t.push(o)}if(0!==e.carbinol&&""!==e.carbinol){o={id:e.carbinolId,oilId:"7",oilName:"甲醇",consTons:e.carbinol};t.push(o)}if(0!==e.ethanol&&""!==e.ethanol){o={id:e.ethanolId,oilId:"8",oilName:"乙醇",consTons:e.ethanol};t.push(o)}if(0!==e.propane&&""!==e.propane){o={id:e.propaneId,oilId:"4",oilName:"液化石油气LPG（丙烷）",consTons:e.propane};t.push(o)}if(0!==e.butane&&""!==e.butane){o={id:e.butaneId,oilId:"5",oilName:"丁烷",consTons:e.butane};t.push(o)}if(0!==e.tianran&&""!==e.tianran){o={id:e.tianranId,oilId:"6",oilName:"液化天然气LNG",consTons:e.tianran};t.push(o)}if(0!==e.highSulfurHeavy&&""!==e.highSulfurHeavy){o={id:e.highSulfurHeavyId,oilId:"1",oilName:"重燃油HFO(高硫)",consTons:e.highSulfurHeavy};t.push(o)}if(0!==e.lowSulfurHeavy&&""!==e.lowSulfurHeavy){o={id:e.lowSulfurHeavyId,oilId:"11",oilName:"重燃油HFO(低硫)",consTons:e.lowSulfurHeavy};t.push(o)}if(0!==e.ulsdSulfurHeavy&&""!==e.ulsdSulfurHeavy){o={id:e.ulsdSulfurHeavyId,oilId:"12",oilName:"重燃油HFO(超低硫)",consTons:e.ulsdSulfurHeavy};t.push(o)}if(0!==e.highSulfurLight&&""!==e.highSulfurLight){o={id:e.highSulfurLightId,oilId:"2",oilName:"轻燃油LFO(高硫)",consTons:e.highSulfurLight};t.push(o)}if(0!==e.lowSulfurLight&&""!==e.lowSulfurLight){o={id:e.lowSulfurLightId,oilId:"21",oilName:"轻燃油LFO(低硫)",consTons:e.lowSulfurLight};t.push(o)}if(0!==e.ulsdSulfurLight&&""!==e.ulsdSulfurLight){o={id:e.ulsdSulfurLightId,oilId:"22",oilName:"轻燃油LFO(超低硫)",consTons:e.ulsdSulfurLight};t.push(o)}return t},createData:function(){var e=this,t=[],o=!0,a=!1,i=void 0;try{for(var l,s=this.specOilFormData[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var n=l.value;(0!==n.consTons&&""!==n.consTons||0!==n.outTons&&""!==n.outTons)&&t.push(n)}}catch(p){a=!0,i=p}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}this.specTemp.volageSpecCons=t,Object(r["a"])(this.specTemp).then((function(t){t.data.result?e.$notify({title:"Success",message:"Created Successfully",type:"success",duration:2e3}):e.$notify({title:"Error",message:"Created Failed",type:"error",duration:2e3})})),this.specdialogFormVisible=!1},updateSpecData:function(){var e=this,t=[],o=!0,a=!1,i=void 0;try{for(var l,s=this.specOilFormData[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var n=l.value;(0!==n.consTons&&""!==n.consTons||0!==n.outTons&&""!==n.outTons)&&t.push(n)}}catch(p){a=!0,i=p}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}this.specTemp.volageSpecCons=t,Object(r["a"])(this.specTemp).then((function(t){t.data.result?e.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3}):e.$notify({title:"Error",message:"Update Failed",type:"error",duration:2e3})})),this.specdialogFormVisible=!1},createDriftData:function(){var e=this;if(1===this.driftTemp.recordType){var t=[],o=!0,a=!1,i=void 0;try{for(var l,s=this.$refs.driftOilTons.oilFormData[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var n=l.value;0!==n.arrTons&&0!==n.deptTons&&t.push(n)}}catch(p){a=!0,i=p}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}this.driftTemp.portOilInfos=t}this.$refs["driftdataForm"].validate((function(t){t&&(Object(r["b"])(e.driftTemp).then((function(t){t.data.result?e.$notify({title:"Success",message:" Successfully",type:"success",duration:2e3}):e.$notify({title:"Error",message:"Failed",type:"error",duration:2e3})})),e.getList(),e.driftdialogFormVisible=!1)}))}}},w=S,k=(o("5361"),o("2877")),C=Object(k["a"])(w,a,i,!1,null,"7fd7e675",null);t["default"]=C.exports}}]);